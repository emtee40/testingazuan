<?xml version="1.0" encoding="ISO-8859-1"?>
<STATEMENTS>

<STATEMENT name="LIST_MODEL"
    query="SELECT KPI_MODEL_ID as ID, KPI_MODEL_NM as NAME, KPI_MODEL_DESC as DESCRIPTION
    FROM SBI_KPI_MODEL as model, SBI_DOMAINS as domains
    WHERE model.KPI_MODEL_TYPE_ID = domains.VALUE_ID
    AND domains.DOMAIN_CD='MODEL_ROOT'" />

<STATEMENT name="LIST_MODEL_TREE"    
    query="SELECT KPI_MODEL_ID as ID, KPI_PARENT_MODEL_ID as PARENT_ID, KPI_MODEL_NM as NAME
    FROM SBI_KPI_MODEL
    WHERE KPI_PARENT_MODEL_ID=?" />
    
<STATEMENT name="LIST_MODEL_TREE_ROOT"    
    query="SELECT KPI_MODEL_ID as ID, KPI_PARENT_MODEL_ID as PARENT_ID, KPI_MODEL_NM as NAME
    FROM SBI_KPI_MODEL
    WHERE KPI_MODEL_ID=?" />
    
<STATEMENT name="DETAIL_MODEL"    
    query="SELECT KPI_MODEL_CD as CODE, KPI_MODEL_NM as NAME, KPI_MODEL_DESC as DESCRIPTION
    FROM SBI_KPI_MODEL
    WHERE KPI_MODEL_ID=?" />
    
<STATEMENT name="DETAIL_MODEL_DOMAINS"    
    query="SELECT VALUE_NM as NAME, VALUE_DS as DESCRIPTION
    FROM SBI_DOMAINS as D, SBI_KPI_MODEL as M
    WHERE D.VALUE_ID = M.KPI_MODEL_TYPE_ID AND M.KPI_MODEL_ID = ?" />
    
<STATEMENT name="DETAIL_MODEL_MODEL_ATTR"    
    query="SELECT DISTINCT AV.KPI_MODEL_ATTR_VAL_ID as A_ID, AV.VALUE as VALUE, A.KPI_MODEL_ATTR_NM as NAME
    FROM SBI_KPI_MODEL_ATTR A,
    SBI_KPI_MODEL_ATTR_VAL AV,
    SBI_KPI_MODEL M
    WHERE A.KPI_MODEL_ATTR_TYPE_ID = M.KPI_MODEL_TYPE_ID
    AND AV.KPI_MODEL_ATTR_ID = A.KPI_MODEL_ATTR_ID
    AND AV.KPI_MODEL_ID=?" />

<STATEMENT name="UPDATE_MODEL"
	query="UPDATE SBI_KPI_MODEL
	SET KPI_MODEL_CD=?,
	KPI_MODEL_DESC=?,
	KPI_MODEL_NM=?
	WHERE KPI_MODEL_ID=?" />

<STATEMENT name="UPDATE_MODEL_ATTR"
	query="UPDATE SBI_KPI_MODEL_ATTR_VAL
	SET VALUE = ?
	WHERE KPI_MODEL_ATTR_VAL_ID = ?" />

<STATEMENT name="INSERT_MODEL_ROOT"	
	query="INSERT INTO SBI_KPI_MODEL
	(KPI_MODEL_CD, KPI_MODEL_DESC, KPI_MODEL_NM, KPI_MODEL_TYPE_ID)
	VALUES (?,?,?,?)"/>
	
<STATEMENT name="INSERT_MODEL_ATTR_ROOT"
	query="INSERT INTO SBI_KPI_MODEL_ATTR_VAL
    (KPI_MODEL_ATTR_ID, KPI_MODEL_ID, VALUE)
	VALUES (?,?,?)"/>
	
<STATEMENT name="SELECT_MODEL_ID_FROM_ATTR"
	query="SELECT KPI_MODEL_ID as ID FROM SBI_KPI_MODEL
	WHERE KPI_MODEL_CD = ?
	AND KPI_MODEL_DESC = ?
	AND KPI_MODEL_NM = ?
	AND KPI_MODEL_TYPE_ID = ?"/>

<STATEMENT name="SELECT_MODEL_ATTR_ID_FROM_MODEL_ID"
	query="SELECT KPI_MODEL_ATTR_ID AS ATTR_ID
	FROM sbi_kpi_model_attr
	WHERE KPI_MODEL_ATTR_TYPE_ID = ?"/>

</STATEMENTS>