<html>
<head>
	<title>SpagoBI's JS-API Test Page</title>
</head>
<body>
	<script type="text/javascript" src="commons.js"></script>
    <script type="text/javascript" src="ajax.js"></script>
    <script type="text/javascript" src="services.js"></script>
    <script type="text/javascript" src="api.js"></script>
	
	<p><b>TEST 1: getDocumentUrl</b><p>
	<iframe id="execiframe" src='' height="300px" width="500px"></iframe>
	<hr>
	
	<p><b>TEST 2: getDocumentHtml</b><p>
	<div height="300px" width="800px" id='department'></div>
	<hr>
		
	<p><b>TEST 3: injectDocument into existing div</b><p>
	<div height="300px" width="100%" id='employee'></div>
	<hr>
	
	<p><b>TEST 4: injectDocument into existing div using ExtJs UI</b><p>
	<div height="500px" width="100%" id='departmentext'></div>
	<hr>
	
	<p><b>TEST 5: injectDocument into non-existing div</b><p>
	
	
	<script type="text/javascript">
<!--
    Sbi.sdk.services.setBaseUrl({
        protocol: 'http'     
        , host: 'localhost'
        , port: '8080'
        , contextPath: 'SpagoBI'
        , controllerPath: 'servlet/AdapterHTTP'  
    });
    
    var result = Sbi.sdk.api.authenticate('biadmin','biadmin');
	
    // TEST 1: getDocumentUrl -----------------------------------------------------
    var url = Sbi.sdk.api.getDocumentUrl({
		documentLabel: 'Department'
		, executionRole: '/spagobi/admin'
		, displayToolbar: false
		, displaySliders: false
		, height: '500px'
		, width: '800px'
		, iframe: {
			style: 'border: 0px;'
		}
	});
    document.getElementById('execiframe').src = url;

   
 	// TEST 2: getDocumentHtml ----------------------------------------------------
    var html = Sbi.sdk.api.getDocumentHtml({
		documentLabel: 'Department'
		, executionRole: '/spagobi/admin'
		, displayToolbar: false
		, displaySliders: false
		, iframe: {
    		height: '500px'
    		, width: '100%'
			, style: 'border: 0px;'
		}
	});
    document.getElementById('department').innerHTML = html;

 	// TEST 3: injectDocument into existing div ------------------------------------
    Sbi.sdk.api.injectDocument({
		documentLabel: 'EmployeeList'
		, executionRole: '/spagobi/admin'
		, parameters: {department_id: 2}
		, displayToolbar: false
		, displaySliders: false
		, target: 'employee'
		, height: '500px'
		, width: '800px'
		, iframe: {
			style: 'border: 0px;'
		}
	});
	
	
 	// TEST 4: injectDocument into non-existing div with ext ---------------------
    Sbi.sdk.api.injectDocument({
		documentLabel: 'Department'
		, executionRole: '/spagobi/admin'
		, displayToolbar: false
		, displaySliders: false
		, target: 'departmentext'
		, iframe: {
			style: 'border: 0px;'
		}
		, useExtUI: true
	});

	
 	// TEST 5: injectDocument into existing div ------------------------------------
    Sbi.sdk.api.injectDocument({
		documentLabel: 'EmployeeList'
		, executionRole: '/spagobi/admin'
		, parameters: {department_id: 2}
		, displayToolbar: false
		, displaySliders: false
		, target: 'newmployee'
		, height: '500px'
		, width: '800px'
		, iframe: {
			style: 'border: 0px;'
		}
	});
	

 	

		//-->
	</script>
	

</body>
</html>