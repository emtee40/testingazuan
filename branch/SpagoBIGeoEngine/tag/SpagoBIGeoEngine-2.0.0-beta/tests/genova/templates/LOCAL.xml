<?xml version="1.0" encoding="UTF-8"?>
<MAP>

	<MAP_PROVIDER class_name="it.eng.spagobi.engines.geo.map.provider.FSMapProvider" dir="./tests/genova/maps" map_name="Circoscrizioni" />

	<DATAMART_PROVIDER class_name="it.eng.spagobi.engines.geo.datamart.provider.FlatDatamartProvider"
			   column_id="sez_codmun"
			   hierarchy_name="Dummy Hierarchy"
			   hierarchy_base_level="circoscrizioni"
			   hierarchy_level="circoscrizioni"
			   column_values="percentuale,votanti"
			   agg_type="sum,sum">
			   
			   
		<DATASET>
      <DATASOURCE type="connection" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/genova" user="root" password="mysql"/>
      <QUERY>
        SELECT sez_codmun, votanti, percentuale FROM elezioni e
      </QUERY>
		</DATASET>		   
	
		<HIERARCHIES>
					
			<HIERARCHY name="Dummy Hierarchy" type="custom">
				<LEVEL name="circoscrizioni" column_id="sez_codmun" column_desc="sez_codmun" feature_name="circoscrizioni"/>                     
			</HIERARCHY>
			

		</HIERARCHIES>
		
		


	</DATAMART_PROVIDER>                       
	
		
	<MAP_RENDERER class_name="it.eng.spagobi.engines.geo.map.renderer.DynamicMapRenderer">	
	
		<MEASURES default_kpi="percentuale">
			<KPI column_id="percentuale" description="Percentuale" pattern="##0.00" unit="%" colour="#E19696">
				<TRESHOLDS type="quantile" lb_value="none" ub_value="none" >
					<PARAM name="GROUPS_NUMBER" value="6" />
				</TRESHOLDS>
				
				<COLOURS type="gradient" outbound_colour="#CCCCCC" null_values_color="#FFFFFF" >
					<PARAM name="BASE_COLOR" value="#FF0000"/>
				</COLOURS>			
			</KPI>
			
			<KPI column_id="votanti" description="N.Votanti" pattern="###,###,##0.##" unit=""  colour="#9696B9">
				<TRESHOLDS type="quantile" lb_value="0" ub_value="none" >
					<PARAM name="GROUPS_NUMBER" value="6" />
				</TRESHOLDS>
				
				<COLOURS type="gradient" outbound_colour="#CCCCCC" null_values_color="#FFFFFF" >
					<PARAM name="BASE_COLOR" value="#0000FF"/>
				</COLOURS>				
			</KPI>
			
		</MEASURES>
		
		<LABELS>
        <LABEL position="header-left" class_name="it.eng.spagobi.engines.geo.map.renderer.DateLabelProducer">
          <FORMAT day="dd/MM/yyyy" hour="HH:mm"/>   
          <TEXT>
            Ultimo aggiornamento del ${day} alle ore ${hour}
          </TEXT>   
        </LABEL>
        
        <LABEL position="header-right" class_name="it.eng.spagobi.engines.geo.map.renderer.QueryLabelProducer">
           <DATASOURCE type="connection" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/genova" user="root" password="mysql"/>
           <QUERY>
              SELECT tot_scrutinati, tot_seggi FROM seggi
          </QUERY> 
          <TEXT>
            Sezioni: ${tot_scrutinati}/${tot_seggi}
          </TEXT>   
        </LABEL>
		</LABELS>
		
		<LAYERS>
			<LAYER name="circoscrizioni" description="circoscrizioni" selected="true" default_fill_color="#4682B4"/>
		</LAYERS>
		
	</MAP_RENDERER>
	
</MAP>