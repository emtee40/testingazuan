ALTER TABLE sbi_objects ADD COLUMN visible SMALLINT ;
UPDATE sbi_objects SET visible=1;
CREATE TABLE SBI_SUBREPORTS (
  MASTER_RPT_ID INTEGER NOT NULL ,
  SUB_RPT_ID INTEGER NOT NULL,
  PRIMARY KEY (MASTER_RPT_ID, SUB_RPT_ID)
);
ALTER TABLE sbi_obj_par DROP CONSTRAINT XPKSBI_OBJ_PAR;
ALTER TABLE sbi_obj_par ADD COLUMN OBJ_PAR_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1);
ALTER TABLE sbi_obj_par DROP PRIMARY KEY;
ALTER TABLE sbi_obj_par ADD CONSTRAINT XPKSBI_OBJ_PAR PRIMARY KEY(OBJ_PAR_ID);
ALTER TABLE sbi_obj_par ADD COLUMN PRIORITY INTEGER;
CREATE MEMORY TABLE SBI_OBJ_PARUSE (
	OBJ_PAR_ID INTEGER NOT NULL,
	USE_ID INTEGER NOT NULL,
	OBJ_PAR_FATHER_ID INTEGER NOT NULL,
	FILTER_COLUMN VARCHAR NOT NULL,
	FILTER_OPERATION VARCHAR NOT NULL,
	CONSTRAINT XPKSBI_OBJ_PARUSE PRIMARY KEY(OBJ_PAR_ID,USE_ID),
	CONSTRAINT FK_SBI_OBJ_PARUSE_1 FOREIGN KEY(OBJ_PAR_ID) REFERENCES SBI_OBJ_PAR(OBJ_PAR_ID),
	CONSTRAINT FK_SBI_OBJ_PARUSE_2 FOREIGN KEY(USE_ID) REFERENCES SBI_PARUSE(USE_ID),
	CONSTRAINT FK_SBI_OBJ_PARUSE_3 FOREIGN KEY(OBJ_PAR_FATHER_ID) REFERENCES SBI_OBJ_PAR(OBJ_PAR_ID)
);
COMMIT; 
