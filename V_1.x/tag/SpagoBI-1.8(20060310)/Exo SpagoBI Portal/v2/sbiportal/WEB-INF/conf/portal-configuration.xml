<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration>
  <component>
    <key>org.exoplatform.services.portal.community.CommunityConfigService</key>
    <type>org.exoplatform.services.portal.community.impl.CommunityConfigServiceImpl</type>
    <init-params>
      <object-param>
        <name>community.portal.1</name>
        <description>configuration for the portal communities</description>
        <object type="org.exoplatform.services.portal.community.impl.CommunityPortalImpl">
          <field  name="groupId"><string>/portal/share</string></field>
          <field  name="membership"><string>member</string></field>
          <field  name="portal"><string>portal</string></field>
          <field  name="priority"><int>5</int></field>
          <field  name="description">
            <string>use 'portal' configuration if user in group portal and have the 
              'member' membership</string>
          </field>
        </object>
      </object-param>
      
      <object-param>
        <name>spagobi.community.portal</name>
        <description>configuration for the spagobi portal communities</description>
        <object type="org.exoplatform.services.portal.community.impl.CommunityPortalImpl">
          <field  name="groupId"><string>/spagobi/share</string></field>
          <field  name="membership"><string>member</string></field>
          <field  name="portal"><string>spagobi</string></field>
          <field  name="priority"><int>5</int></field>
          <field  name="description">
            <string>configuration for the spagobi portal communities</string>
          </field>
        </object>
      </object-param>

      <object-param>
        <name>configuration</name>
        <description>configuration for the portal communities</description>
        <object type="org.exoplatform.services.portal.community.impl.CommunityNavigationImpl">
          <field  name="groupId"><string>/portal/share</string></field>
          <field  name="membership"><string>member</string></field>
          <field  name="navigation"><string>portal</string></field>
          <field  name="description"><string>test</string></field>
        </object>
      </object-param>
      
      <object-param>
        <name>spagobi configuration</name>
        <description>configuration for the spagobi portal communities</description>
        <object type="org.exoplatform.services.portal.community.impl.CommunityNavigationImpl">
          <field  name="groupId"><string>/spagobi/share</string></field>
          <field  name="membership"><string>member</string></field>
          <field  name="navigation"><string>spagobi</string></field>
          <field  name="description"><string>configuration for the spagobi portal communities</string></field>
        </object>
      </object-param>
      
    </init-params>
  </component> 
	
	<component>
    <type>org.exoplatform.services.portal.impl.UserConfigTemplate</type>
	  <init-params>
	    <object-param>
	      <name>configuration</name>
	      <description>description</description>
	      <object type="org.exoplatform.services.portal.impl.NewPortalConfig">
	        <field  name="predefinedUser">
	          <collection type="java.util.HashSet">
	            <value><string>admin</string></value>
	            <value><string>exo</string></value>
	            <value><string>portal</string></value>
	            <value><string>exotest</string></value>
	            <value><string>community</string></value>
	            <value><string>company</string></value>
              <value><string>spagobi</string></value>
              <value><string>biadmin</string></value>
              <value><string>bidev</string></value>
              <value><string>bitest</string></value>
              <value><string>biuser</string></value>
	          </collection>
	        </field>
	        <field  name="templateUser"><string>template</string></field>
	        <field  name="templateLocation"><string>war:/conf/users</string></field>
	      </object>
	    </object-param>
	  </init-params>
	</component>
	
  <external-component-plugins>
    <target-component>org.exoplatform.services.organization.OrganizationService</target-component>
    <component-plugin>
      <name>portal.new.user.event.listener</name>
      <set-method>addListenerPlugin</set-method>
      <type>org.exoplatform.services.portal.impl.PortalUserEventListenerImpl</type>
      <description>this listener create the portal configuration for the new user</description>
      <init-params>
        <object-param>
          <name>configuration</name>
          <description>description</description>
          <object type="org.exoplatform.services.portal.impl.NewPortalConfig">
            <field  name="predefinedUser">
              <collection type="java.util.HashSet">
                <value><string>admin</string></value>
                <value><string>exo</string></value>
                <value><string>company</string></value>
                <value><string>community</string></value>
                <value><string>portal</string></value>
                <value><string>exotest</string></value>
                <value><string>spagobi</string></value>
                <value><string>biadmin</string></value>
                <value><string>bidev</string></value>
                <value><string>bitest</string></value>
                <value><string>biuser</string></value>
              </collection>
            </field>
            <field  name="templateUser"><string>template</string></field>
            <field  name="templateLocation"><string>war:/conf/users</string></field>
          </object>
        </object-param>
      </init-params>
    </component-plugin>
    <component-plugin>
      <name>portal.membership.event.listener</name>
      <set-method>addListenerPlugin</set-method>
      <type>org.exoplatform.services.portal.impl.PortalMembershipEventListener</type>
      <description>this listener create the portal configuration for the new user</description>
    </component-plugin>
    <component-plugin>
      <name>community.group.event.listener</name>
      <set-method>addListenerPlugin</set-method>
      <type>org.exoplatform.services.portal.community.impl.CommunityGroupEventListener</type>
      <description>listen to the delete group event and remove the community configuration for that group</description>
    </component-plugin>
  </external-component-plugins>
</configuration>
